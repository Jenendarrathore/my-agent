# Full API CRUD Detailed Trace
Generated: 2026-02-28T05:02:32.631248+00:00
========================================

## 1. Authentication & User
### User Registration
**Request:** `POST /api/auth/register`
```json
{
  "name": "Trace Tester",
  "username": "trace_1772254952",
  "primary_email": "trace_1772254952@example.com",
  "password": "SecurePassword123!"
}
```
**Curl Command:**
```bash
curl -X POST http://localhost:8000/api/auth/register -d '{"name": "Trace Tester", "username": "trace_1772254952", "primary_email": "trace_1772254952@example.com", "password": "SecurePassword123!"}'
```
**Response Status:** 200 ✅
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY",
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInR5cGUiOiJyZWZyZXNoIiwiZXhwIjoxNzcyODU5NzUyfQ.JUXrxlYJCcx9X1xho-eI0ctNx8lZY75Gn2Sn440tN5s",
  "token_type": "bearer"
}
```
--------------------
### Get Current User
**Request:** `GET /api/v1/users/me`
**Curl Command:**
```bash
curl -X GET http://localhost:8000/api/v1/users/me -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 200 ✅
```json
{
  "name": null,
  "username": "trace_1772254952",
  "primary_email": "trace_1772254952@example.com",
  "id": 12,
  "is_active": true,
  "created_at": "2026-02-28T05:02:32.922904Z"
}
```
--------------------
### Update User
**Request:** `PATCH /api/v1/users/12`
```json
{
  "name": "Trace Pro"
}
```
**Curl Command:**
```bash
curl -X PATCH http://localhost:8000/api/v1/users/12 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"name": "Trace Pro"}'
```
**Response Status:** 200 ✅
```json
{
  "name": "Trace Pro",
  "username": "trace_1772254952",
  "primary_email": "trace_1772254952@example.com",
  "id": 12,
  "is_active": true,
  "created_at": "2026-02-28T05:02:32.922904Z"
}
```
--------------------
### Get User by ID
**Request:** `GET /api/v1/users/12`
**Curl Command:**
```bash
curl -X GET http://localhost:8000/api/v1/users/12 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 200 ✅
```json
{
  "name": "Trace Pro",
  "username": "trace_1772254952",
  "primary_email": "trace_1772254952@example.com",
  "id": 12,
  "is_active": true,
  "created_at": "2026-02-28T05:02:32.922904Z"
}
```
--------------------

## 2. Category CRUD
### Create Category
**Request:** `POST /api/v1/categories/`
```json
{
  "name": "Trace_Cat_1772254952",
  "type": "expense"
}
```
**Curl Command:**
```bash
curl -X POST http://localhost:8000/api/v1/categories/ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"name": "Trace_Cat_1772254952", "type": "expense"}'
```
**Response Status:** 201 ✅
```json
{
  "name": "Trace_Cat_1772254952",
  "type": "expense",
  "is_system": false,
  "id": 7,
  "user_id": 12,
  "created_at": "2026-02-28T05:02:33.187721Z"
}
```
--------------------
### List Categories
**Request:** `GET /api/v1/categories/`
**Curl Command:**
```bash
curl -X GET http://localhost:8000/api/v1/categories/ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 200 ✅
```json
[
  {
    "name": "Trace_Cat_1772254952",
    "type": "expense",
    "is_system": false,
    "id": 7,
    "user_id": 12,
    "created_at": "2026-02-28T05:02:33.187721Z"
  }
]
```
--------------------
### Update Category
**Request:** `PATCH /api/v1/categories/7`
```json
{
  "name": "Trace Modified"
}
```
**Curl Command:**
```bash
curl -X PATCH http://localhost:8000/api/v1/categories/7 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"name": "Trace Modified"}'
```
**Response Status:** 200 ✅
```json
{
  "name": "Trace Modified",
  "type": "expense",
  "is_system": false,
  "id": 7,
  "user_id": 12,
  "created_at": "2026-02-28T05:02:33.187721Z"
}
```
--------------------

## 3. Connected Account CRUD
### Create Connected Account
**Request:** `POST /api/v1/connected-accounts/`
```json
{
  "provider": "gmail",
  "email": "trace_1772254952@gmail.com",
  "access_token": "tk_123",
  "refresh_token": "rf_123",
  "token_expiry": "2026-03-30T05:02:33.223262+00:00"
}
```
**Curl Command:**
```bash
curl -X POST http://localhost:8000/api/v1/connected-accounts/ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"provider": "gmail", "email": "trace_1772254952@gmail.com", "access_token": "tk_123", "refresh_token": "rf_123", "token_expiry": "2026-03-30T05:02:33.223262+00:00"}'
```
**Response Status:** 201 ✅
```json
{
  "provider": "gmail",
  "email": "trace_1772254952@gmail.com",
  "is_active": true,
  "id": 5,
  "user_id": 12,
  "token_expiry": "2026-03-30T05:02:33.223262Z",
  "created_at": "2026-02-28T05:02:33.230205Z"
}
```
--------------------

## 4. Email Connection CRUD
### Create Email Connection
**Request:** `POST /api/v1/email-connections/`
```json
{
  "user_id": 12,
  "provider": "gmail",
  "access_token": "env_tk",
  "refresh_token": "env_rf",
  "expires_at": "2026-02-28T06:02:33.245746+00:00"
}
```
**Curl Command:**
```bash
curl -X POST http://localhost:8000/api/v1/email-connections/ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"user_id": 12, "provider": "gmail", "access_token": "env_tk", "refresh_token": "env_rf", "expires_at": "2026-02-28T06:02:33.245746+00:00"}'
```
**Response Status:** 201 ✅
```json
{
  "provider": "gmail",
  "access_token": "env_tk",
  "refresh_token": "env_rf",
  "scopes": null,
  "expires_at": "2026-02-28T06:02:33.245746Z",
  "id": 4,
  "user_id": 12,
  "revoked_at": null,
  "created_at": "2026-02-28T05:02:33.255750Z",
  "updated_at": "2026-02-28T05:02:33.255756Z"
}
```
--------------------

## 5. Email CRUD
### Create Email
**Request:** `POST /api/v1/emails/`
```json
{
  "user_id": 12,
  "email_connection_id": 4,
  "provider": "gmail",
  "provider_message_id": "trace_msg_1772254952",
  "subject": "Trace Subject",
  "received_at": "2026-02-28T05:02:33.264708+00:00"
}
```
**Curl Command:**
```bash
curl -X POST http://localhost:8000/api/v1/emails/ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"user_id": 12, "email_connection_id": 4, "provider": "gmail", "provider_message_id": "trace_msg_1772254952", "subject": "Trace Subject", "received_at": "2026-02-28T05:02:33.264708+00:00"}'
```
**Response Status:** 201 ✅
```json
{
  "provider": "gmail",
  "provider_message_id": "trace_msg_1772254952",
  "thread_id": null,
  "subject": "Trace Subject",
  "body_text": null,
  "body_html": null,
  "received_at": "2026-02-28T05:02:33.264708Z",
  "checksum": null,
  "extraction_status": "PENDING",
  "extraction_version": null,
  "id": 4,
  "user_id": 12,
  "email_connection_id": 4,
  "fetched_at": "2026-02-28T05:02:33.269509Z",
  "created_at": "2026-02-28T05:02:33.269512Z"
}
```
--------------------

## 6. Job CRUD
### Create Job
**Request:** `POST /api/v1/jobs/`
```json
{
  "job_type": "EMAIL_FETCH",
  "triggered_by": "MANUAL"
}
```
**Curl Command:**
```bash
curl -X POST http://localhost:8000/api/v1/jobs/ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"job_type": "EMAIL_FETCH", "triggered_by": "MANUAL"}'
```
**Response Status:** 201 ✅
```json
{
  "job_type": "EMAIL_FETCH",
  "status": "QUEUED",
  "triggered_by": "MANUAL",
  "input_payload": null,
  "output_payload": null,
  "error_payload": null,
  "retry_count": 0,
  "id": 4,
  "started_at": null,
  "finished_at": null,
  "created_at": "2026-02-28T05:02:33.282626Z"
}
```
--------------------

## 7. LLM Transaction CRUD
### Create LLM Transaction
**Request:** `POST /api/v1/llm-transactions/`
```json
{
  "job_id": 4,
  "model_name": "gpt-4",
  "provider": "openai"
}
```
**Curl Command:**
```bash
curl -X POST http://localhost:8000/api/v1/llm-transactions/ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"job_id": 4, "model_name": "gpt-4", "provider": "openai"}'
```
**Response Status:** 201 ✅
```json
{
  "model_name": "gpt-4",
  "provider": "openai",
  "prompt_version": null,
  "prompt_hash": null,
  "input_tokens": 0,
  "output_tokens": 0,
  "total_tokens": 0,
  "estimated_cost": 0.0,
  "latency_ms": 0,
  "id": 4,
  "job_id": 4,
  "created_at": "2026-02-28T05:02:33.295550Z"
}
```
--------------------

## 8. Email Extraction CRUD
### Create Extraction
**Request:** `POST /api/v1/email-extractions/`
```json
{
  "email_id": 4,
  "status": "SUCCESS",
  "extracted_json": {
    "test": "data"
  }
}
```
**Curl Command:**
```bash
curl -X POST http://localhost:8000/api/v1/email-extractions/ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"email_id": 4, "status": "SUCCESS", "extracted_json": {"test": "data"}}'
```
**Response Status:** 201 ✅
```json
{
  "extraction_version": null,
  "status": "SUCCESS",
  "extracted_json": {
    "test": "data"
  },
  "model_used": null,
  "prompt_hash": null,
  "id": 4,
  "email_id": 4,
  "created_at": "2026-02-28T05:02:33.313304Z"
}
```
--------------------

## 9. Financial Transaction CRUD
### Create Transaction
**Request:** `POST /api/v1/transactions/`
```json
{
  "user_id": 12,
  "amount": 10.5,
  "type": "expense",
  "occurred_at": "2026-02-28T05:02:33.321630+00:00",
  "category_id": 7
}
```
**Curl Command:**
```bash
curl -X POST http://localhost:8000/api/v1/transactions/ -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY' -d '{"user_id": 12, "amount": 10.5, "type": "expense", "occurred_at": "2026-02-28T05:02:33.321630+00:00", "category_id": 7}'
```
**Response Status:** 201 ✅
```json
{
  "amount": 10.5,
  "type": "expense",
  "occurred_at": "2026-02-28T05:02:33.321630Z",
  "category_id": 7,
  "source": "manual",
  "external_id": null,
  "notes": null,
  "id": 7,
  "user_id": 12,
  "created_at": "2026-02-28T05:02:33.329900Z"
}
```
--------------------

## 10. Cleanup
### Delete Transaction
**Request:** `DELETE /api/v1/transactions/7`
**Curl Command:**
```bash
curl -X DELETE http://localhost:8000/api/v1/transactions/7 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 204 ✅
*[No JSON Body]*
--------------------
### Delete Extraction
**Request:** `DELETE /api/v1/email-extractions/4`
**Curl Command:**
```bash
curl -X DELETE http://localhost:8000/api/v1/email-extractions/4 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 204 ✅
*[No JSON Body]*
--------------------
### Delete LLM TX
**Request:** `DELETE /api/v1/llm-transactions/4`
**Curl Command:**
```bash
curl -X DELETE http://localhost:8000/api/v1/llm-transactions/4 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 204 ✅
*[No JSON Body]*
--------------------
### Delete Job
**Request:** `DELETE /api/v1/jobs/4`
**Curl Command:**
```bash
curl -X DELETE http://localhost:8000/api/v1/jobs/4 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 204 ✅
*[No JSON Body]*
--------------------
### Delete Email
**Request:** `DELETE /api/v1/emails/4`
**Curl Command:**
```bash
curl -X DELETE http://localhost:8000/api/v1/emails/4 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 204 ✅
*[No JSON Body]*
--------------------
### Delete Email Conn
**Request:** `DELETE /api/v1/email-connections/4`
**Curl Command:**
```bash
curl -X DELETE http://localhost:8000/api/v1/email-connections/4 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 204 ✅
*[No JSON Body]*
--------------------
### Delete Account
**Request:** `DELETE /api/v1/connected-accounts/5`
**Curl Command:**
```bash
curl -X DELETE http://localhost:8000/api/v1/connected-accounts/5 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 204 ✅
*[No JSON Body]*
--------------------
### Delete Cat
**Request:** `DELETE /api/v1/categories/7`
**Curl Command:**
```bash
curl -X DELETE http://localhost:8000/api/v1/categories/7 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 204 ✅
*[No JSON Body]*
--------------------
### Delete User
**Request:** `DELETE /api/v1/users/12`
**Curl Command:**
```bash
curl -X DELETE http://localhost:8000/api/v1/users/12 -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMiIsInJvbGUiOiJ1c2VyIiwidHlwZSI6ImFjY2VzcyIsImV4cCI6MTc3MjI1ODU1Mn0.bZnaWBpYKy3kEDPNP3A_sD0cD26YyZa6aqUY3uswdHY'
```
**Response Status:** 204 ✅
*[No JSON Body]*
--------------------

========================================
Trace Complete.